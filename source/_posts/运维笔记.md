---
title: 网络系统集成
date: 2018-08-31 13:01:01
categories: Linux
tags:
    - Linux
    - 运维
---

# {% cq %}运维笔记{% endcq %}

---

## 运维常用命令

<!-- more -->

* Linux命令详解：`man.linuxde.net/命令名`


* ifconfig

  * 查看网络地址：`# ifconfig`

  * 网卡配置文件：`/etc/sysconfig/network-scripts/ifcfg-eth0`

  * 网卡配置详细内容

    ```
    DEVICE=eth0 网卡的名字
    
    HWADDR=00:0c:29:90:89:d9 HWADDR HardWare Address 硬件地址 MAC地址
    
    TYPE=Ethernet 网络类型 以太网
    
    UUID=ae779ae6-044d-43d5-a33b-48c89e8de10e #UUID 做到系统中独一无二。
    
    ONBOOT=yes BOOT ON ? 在开机或重启网卡的时候是否启动网卡
    
    NM_CONTROLLED=yes 是否受network程序管理
    
    BOOTPROTO=none 网卡是如何获取到ip地址 网卡获取ip地址的方式
    
    　　a. dhcp 自动获取ip地址
    
    　　b. none 固定的ip地址
    
    　　c. static 固定的ip地址
    
    IPADDR=10.0.0.100 IPADDR ip地址
    
    NETMASK=255.255.255.0 子网掩码 决定这个局域网中最多有多少台机器
    
    GATEWAY=10.0.0.2 网关 整个大楼的大门
    
    USERCTL=no 普通用户是否能控制网卡
    
    /etc/resolv.conf 配置DNS 网卡配置文件的DNS优先于/etc/resolv.conf
    
    DNS 域名解析器 阿里的域名解析器：223.5.5.5 223.6.6.6
    
    ```

  * 重启网卡：` # /etc/init.d/network restart`



* nameserver
  * 配置DNS服务器：`# nameserver 8.8.8.8`



* du
  * 显示文件的大小：`# du -h 文件路径`
  * -h：以易读的方式显示



* ps -ef

  * 当前系统的进程状态：`# ps -ef`

  * 选项

    ```shell
    -e：显示所有程序，与‘A’效果相同
    -f：显示UID,PPIP,C与STIME栏位。
    ```

  * 搭配 `grep` 可以过滤所需要查看的进程：`# ps -ef | grep vim`
  * 搭配 `kill` 可结束进程：`kill PID/进程名`



* top

  * 实时查看系统的运行情况：`# top`

  * 可按c、m等键按照CPU、Memory排序
  * 按q退出



* df -th

  * 显示磁盘分区上可使用的磁盘空间：`# df -th`

  * 选项

    ```shell
    -t (--type)仅显示指定文件系统类型的磁盘信息
    -h 以可读性较高的方式显示
    ```


* mount
  * 加载文件系统到指定的加载点：`# mount /dev/cdrom /mnt/cdrom`
  * `/dev` 目录下存放了外部设备
  * `/mnt` 目录下可用于挂载外部设备



* tar

  * 归档，压缩，解压缩等

  * 选项：

    ```shell
    -x    解压缩文件
    -c    创建压缩文件(create)
    -z	  gzip
    -j	  bzip2
    -v	  显示过程
    -t    查看压缩包内文件
    -f    (file)必备选项
    ```

  * 查看`.tar.gz`文件：`# tar -ztvf log.tar.gz`

  * 解压`.tar.gz`文件：`# tar -zxvf /opt/soft/test/log.tar.gz`

  * 将文件打包：

    ```shell
    # tar -cvf log.tar log2012.log       仅打包，不压缩，最后一列是操作对象，也即是要打包的文件
    # tar -zcvf log.tar.gz log2012.log   打包后，以 gzip 压缩 
    # tar -jcvf log.tar.bz2 log2012.log  打包后，以 bzip2 压缩 
    ```



* rpm
  * 从rpm软件包安装软件：`# rpm -ivh 软件包路径 `
  * 列出所安装的rpm软件：`# rpm -qa`
  * 一个rpm包中的文件安装到那里去了：`rpm -ql rpm包名`



* 













---

## NTP 时间服务器的配置

* 可参考：[火之晨曦](https://www.cnblogs.com/jczhu/p/5851268.html)


1. 安装NTP服务

   ```shell
   # yum install ntp ntpdate
   ```

2. 修改配置文件

   ```shell
   # vim /etc/ntp.conf
   ```

   把下列配置替换原有配置文件

   ```
   driftfile /var/lib/ntp/drift
   restrict default kod nomodify notrap nopeer noquery
   restrict -6 default kod nomodify notrap nopeer noquery
   restrict 127.0.0.1
   restrict -6 ::1
   server 127.127.1.0		#local clock
   server pool.ntp.org		#local clock
   fudge 127.127.1.0 stratum 10
   includefile /etc/ntp/crypto/pw
   keys /etc/ntp/keys
   ```

3. 查看NTP服务器

   ```shell
   # ntpq -p
   ```

---

## DHCP 服务器

* 可参考：

1. 安装DHCP服务

   ```
   # yum install dhcp dhcp-devel -y
   ```

2. 修改配置文件

   ```shell
   # vim /etc/dhcp.conf
   ```

   配置：

   ```
   
   ```

---

## Samba 服务器

* 可参考：[一如莱戈、](https://www.cnblogs.com/hxgoto/p/7071175.html)

1. 安装samba服务

   ```shell
   # yum install -y samba
   ```



* 安装成功后，系统会生成服务的配置文件和一些命令工具

  * `/etc/samba/smb.conf `  //是samba服务的主配置文件

  * `/etc/init.d/smb`             //是samba的启动/关闭文件

  * 查看开机启动情况：`# service smb status`

  * 启动服务：`# service smb start`

  * 设置开机启动：

    ```shell
    # chkconfig  --level 35 smb on      // 设置开机启动
    # chkconfig --list smb				、、 查看0-6的状态，smb服务启动或关闭
    ```


2. 配置

   ``` shell
   # vim /etc/samba/smb.conf
   
   配置：
   
   [global]　　　　　　　　　　　　　　//设置samba服务整体环境
   
   workgroup = WORKGROUP　　　　　  //设置工作组名称
   server string = Samba Server Version %v     //服务器说明
   
   [dingLinux]　　　　　　　//共享目录的名称
   
   comment = Public stuff　　　//注释说明　
   path = /usr/local/laig　　　//共享目录的路径
   public = yes　　　 　　　　　//是yes/否no公开共享，若为否则进行身份验证(只有当security = share 时此项才起作用)
   writeable = yes　　　　　//是yes/否no不以只读方式共享当与read only发生冲突时，无视read only
   browseable = yes　      //是yes/否no在浏览资源中显示共享目录，若为否则必须指定共享路径才能存取
   guest ok = yes　　　　　　//是yes/否no公开共享，若为否则进行身份验证(只有当security = share 时此项才起作用)
   ```




3. 注意

   * 防火墙要关闭： `# service iptables  stop`

   * selinux要设置成disabled，路径是：`/etc/sysconfig/selinux`

   * 注意共享目录的权限设置

   * 要设置成不需要用户名密码直接访问，需要修改配置文件，将`security`设置成`security = share`

   * 修改配置后要重启服务：`# service smb restart`

4. 访问共享文件夹

   * 在windows中打开文件资源管理器输入 `\\192.168.1.194` 进行访问，ip地址根据自己的服务器地址来输入





---

## Apache服务器安装

